# Auto-Doc Agent

![Auto-Doc Status](https://img.shields.io/badge/status-active-success.svg)
![Python Version](https://img.shields.io/badge/python-3.10%2B-blue)
![Gemini Model](https://img.shields.io/badge/model-Gemini%203%20Flash%2FPro-orange)

**Never write stale documentation again.**

Auto-Doc is an intelligent AI agent that lives in your git repository. It watches your commits, analyzes your code changes using **Google's Gemini 3 (Thinking Models)**, and automatically updates your documentation to match the new reality of your codebase.

---

## üìã Table of Contents

- [Auto-Doc Agent](#auto-doc-agent)
  - [üìã Table of Contents](#-table-of-contents)
  - [üöÄ Key Features](#-key-features)
  - [üì¶ Installation](#-installation)
    - [Option A: Install from GitHub (Recommended)](#option-a-install-from-github-recommended)
    - [Option B: Local Development](#option-b-local-development)
    - [Authentication](#authentication)
  - [‚ö° Quick Start](#-quick-start)
  - [‚öôÔ∏è Configuration](#Ô∏è-configuration)
  - [üìÇ Project Structure \& Documentation](#-project-structure--documentation)
  - [üõ†Ô∏è Contributing](#Ô∏è-contributing)

---

## üöÄ Key Features

- **ü§ñ Zero-Click Updates**: Runs automatically via a standard Git Post-Commit Hook. You code, it documents.
- **üß† Deep Reasoning**: Leverages Gemini 3.0's "Thinking" capabilities to understand complex logic changes, not just syntax.
- **üìö Context Awareness**: Define "Global Context" files (like `README.md` or `ARCHITECTURE.md`) that are always included in the prompt, ensuring the AI understands the bigger picture.
- **üó∫Ô∏è Config-Driven Routing**: Precisely map source files (globs) to specific documentation files (e.g., `src/core/*.py` ‚Üí `docs/core.md`).
- **üé® Custom Templates**: Full control over the AI's output using Jinja2 templates.
- **üñ•Ô∏è IDE Compatible**: Works with **VS Code** or any Git client that triggers hooks.
- **üêï Dogfooding**: This project documents itself using Auto-Doc!

## üì¶ Installation

You can install Auto-Doc directly from the repository using `pip`.

### Option A: Install from GitHub (Recommended)
Add to your `requirements.txt`:
```text
git+https://github.com/jorsm/gemini-autodoc.git@main
```
Or install via command line:
```bash
pip install git+https://github.com/jorsm/gemini-autodoc.git
```

### Option B: Local Development
Cloning the source is useful if you want to modify the agent itself.
```bash
git clone https://github.com/jorsm/gemini-autodoc.git
cd auto-doc
pip install -e .
```

### Authentication
Auto-Doc requires a Google Gemini API Key.
1.  **Environment Variable** (Best for CI/CD):
    ```bash
    export GEMINI_API_KEY="your-api-key-here"
    ```
2.  **.env File**:
    Create a file named `.env` in your project root or inside `.autodoc/.env`. Auto-Doc expects ONE line:
    ```bash
    GEMINI_API_KEY=your-api-key-here
    ```

## ‚ö° Quick Start

1.  **Initialize Auto-Doc**:
    Run inside your project root. This creates `.autodoc/` and installs the git hook.
    ```bash
    autodoc init
    ```

2.  **Configure Mappings**:
    Edit `.autodoc/config.yaml` to define which code updates which docs.
    *   See [Configuration Reference](docs/config_file.md) for details.
    *   Check [.autodoc/config.sample.yaml](.autodoc/config.sample.yaml) for a template.

    ```yaml
    # Global context (always included)
    context:
      files: ["README.md"]

    mappings:
      - name: "API Docs"
        source: "src/**/*.py"
        target: "docs/api.md"
        # Optional: Exclude files
        # exclude: ["src/tests/**"]

    # AI Config
    model: "gemini-3-flash-preview"
    thinking_level: "high"
    ```

3.  **Code & Commit**:
    ```bash
    git add .
    git commit -m "feat: implemented user login"
    ```
    
    > **Note**: This works in **VS Code**, and terminal. The hook runs in the background.
    > The AI will analyze the changes and update `docs/api.md` automatically in a subsequent operation.

## ‚öôÔ∏è Configuration

Auto-Doc is highly configurable. The main configuration lives in `.autodoc/config.yaml`.

| Feature | Description | Reference |
| :--- | :--- | :--- |
| **Mappings** | Map source files to doc files using globs. | [Config Docs](docs/config_file.md#mappings) |
| **Thinking** | Control Gemini's reasoning depth (`low`, `high`). | [Config Docs](docs/config_file.md#model) |
| **Templates** | Customize the prompt sent to the LLM. | [Templates Docs](docs/templates.md) |

## üìÇ Project Structure & Documentation

This project's documentation is automatically generated by Auto-Doc. Explore the `docs/` folder to see how it works:

- **[Core Logic](docs/core.md)**: The internal `DocGenerator` engine.
- **[CLI Commands](docs/commands.md)**: `init` and `sync` command references.
- **[Utilities](docs/utils.md)**: Git and Logging helpers.
- **[Configuration File](docs/config_file.md)**: Detailed guide to `config.yaml` options.
- **[Templates](docs/templates.md)**: Explanation of Jinja2 variables and context.

## üõ†Ô∏è Contributing

1.  Fork the repo.
2.  Create a feature branch.
3.  Commit your changes (Auto-Doc will try to document them!).
4.  Push and open a PR.

---
*Powered by Google Gemini*
